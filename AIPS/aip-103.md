<pre>
  AIP: *103*
  Title: *Marketplace Transaction Types*
  Authors: *ARK.io Team <aips@ark.io>*
  Status: *Draft | Active*
  Discussions-To: https://github.com/arkecosystem/AIPS/issues/103
  Type: *Standards*
  Category: Core | Network | Protocol
  Created: 2019-06-27
  Last Update: 2019-08-09
  Requires: AIP-29
</pre>

# Marketplace Transaction Types

A team or a company will be able to issue a business/bridgechain registration transaction in the same way a delegate registration transaction is issued. The proposed fee for this transaction should be in the level of delegate registration ARK as it relates to a similar process, however as this introduces more data being stored on mainnet, we should take spam protection into consideration (fees, rules). We will also add ability to terminate business or bridgechain via a special transaction type (reason: for new projects or companies to use the non-claimed chain ticker, business name). 

## Prerequisites:
AIP-29.

## General Features:

### Hardware limitations
Size limitations related to size of specifics fields, that can go into the additional assets. We must be careful and limit every incoming field to avoid simple and cheap attack issues on the mainnet - which would result in size/spam increase.

### Processing Limits
1. Strict schema validation
2. Ensure checks on transaction pool and protocol level (see specs for each transaction type)

Check below for specification of new transaction types. We are introducing the following transaction types: 

1. BusinessRegistration
2. BusinessResignation
3. BusinessUpdate
4. BridgeChainRegistration
5. BridgeChainResignation
6. BridgechainUpdate

# 1.BusinessRegistration Transaction

Name: **BusinessRegistration**


## Fields:

| Field                        | Size(bytes) | Requires |
| --------                     | --------    | -------- |
| Name                         | 40          |    Y     |
| Website Address              | 50          |    Y     |
| VAT                          | 15          |    Y     |
| GitHub Organization Repo     | 50          |    Y     |



We allow UTF8, for all that strange chars and names. 

## Transaction Processing:
Add BusinessInformation to wallets, so we can identify them and access the latest data.

### Verify
- size limitations of specific fields
- schema validation of some fields

### Apply
- add state to wallet (Business)

### Fees   
- we MUST enforce a high static fee ~ 50 ARK
- expand the protocol, so that only static fee is accepted


> Final decision and specifics will be adjusted by project lead and aligned during actual implementation.


Busines wallet should get fields:

```ts
 interface IBusinessWalletProperty {
    businessAsset: IBusinessRegistrationAsset;
    isBusinessResigned?: boolean;
    bridgechains?: IBridgechainWalletProperty[];
}
```


# 2.BusinessResignation Transaction

Name: **BusinessResignation**

A Business can terminate its registration, if itâ€™s no longer operational or working. The reasoning behind this is to make posible for wallet to issue BusinessRegistration again.

## Transaction Processing:

### Verify
- only a registered business can issue this transaction type.

### Apply
- add state to wallet (`resigned`) 
- all bridgechain are resigned

### Fees
- it can be a normal transfer fee
 

# 3.BusinessUpdate Transaction

A Business can update its business asset stored in wallet.

## Limitations/Rules: 
- Only a registered business can issue this transaction type.

## Fields:

| Field                        | Size(bytes) | Requires |
| --------                     | --------    | -------- |
| Name                         | 40          |    N     |
| Website Address              | 50          |    N     |
| GitHub Organization Repo     | 50          |    N     |

## Transaction Processing:

### Verify
- TBD 

### Apply
- TBD

### Fees
- TBD

# 4.BridgeChainRegistration Transaction

Name: **BridgeChainRegistration**

## Fields:

| Field                            | Size(bytes) | Requires |
| --------                         | --------    | -------- |
| Name                             | 40          |    Y     |
| Seed nodes                       | 300         |    Y     |
| Genesis Hash                     | 33          |    Y     |
| Source repository (github,..)    | 50          |    Y     |


## Transaction Processing:

### Verify

- only a registered business can issue this transaction type. If address has not issued a BusinessTransaction yet, it should be rejected.
- size limitations of specific fields
- max number of input seeds (~15)

### Apply
- add bridgechain details to **BusinessRegistered** wallets (core-state), so we can list them and access the latest data specified data

### Fees   
- we MUST enforce a high static fee ~ 25 ARK
- expand the protocol, so that only static fee is accepted

> Final decision and specifics will be adjusted by project lead and aligned during actual implementation.


# 5.BridgeChainResignation Transaction

A Business can terminate one of its bridgechain registrations. 

Name: **BridgeChainResignation**


## Fields:

| Field                            | Size(bytes) | Requires |
| --------                         | --------    | -------- |
| RegistrationTransactionId        |    33       |    Y     |


## Transaction Processing:

### Verify
- only a registered business can issue this transaction type 
- we need to define the ID of bridgechain we are resigning

### Apply
- add `resigned` flag to wallet

### Fees
- normal dynamic tranfer feed

# 6.BridgeChainUpdate Transaction
- TBD